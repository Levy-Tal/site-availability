"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[388],{2519:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"api/endpoints","title":"API Endpoints","description":"This page lists the main API endpoints for Site Availability Monitoring.","source":"@site/docs/api/endpoints.md","sourceDirName":"api","slug":"/api/endpoints","permalink":"/site-availability/docs/api/endpoints","draft":false,"unlisted":false,"editUrl":"https://github.com/Levy-Tal/site-availability/tree/main/docs/docs/api/endpoints.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"API Overview","permalink":"/site-availability/docs/api/overview"},"next":{"title":"Metrics Integration","permalink":"/site-availability/docs/metrics"}}');var t=i(4848),a=i(8453);const r={sidebar_position:3},o="API Endpoints",l={},d=[{value:"Endpoints",id:"endpoints",level:2},{value:"/sync Endpoint Example",id:"sync-endpoint-example",level:2},{value:"Request",id:"request",level:3},{value:"Response",id:"response",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"api-endpoints",children:"API Endpoints"})}),"\n",(0,t.jsx)(n.p,{children:"This page lists the main API endpoints for Site Availability Monitoring."}),"\n",(0,t.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GET  /api/apps"})," \u2014 List all monitored applications and their status. Supports filtering by query parameters (e.g., ",(0,t.jsx)(n.code,{children:"?location=NY&status=up"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GET  /api/locations"})," \u2014 List all configured locations with their status."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GET  /api/labels"})," \u2014 List all available label keys or values."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GET  /api/scrape-interval"})," \u2014 Get the current scraping interval in milliseconds."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GET  /api/docs"})," \u2014 Get documentation metadata (title, URL)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GET  /metrics"})," \u2014 Prometheus metrics for monitoring."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GET  /healthz"})," \u2014 Liveness probe."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GET  /readyz"})," \u2014 Readiness probe."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GET  /sync"})," \u2014 (If enabled) Export all app statuses and locations for federation (protected by HMAC)."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"sync-endpoint-example",children:"/sync Endpoint Example"}),"\n",(0,t.jsx)(n.h3,{id:"request",children:"Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /sync HTTP/1.1\nHost: site-a.example.com\nX-Site-Sync-Timestamp: 2024-06-01T12:00:00Z\nX-Site-Sync-Signature: <signature>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "locations": [\n    {\n      "name": "New York",\n      "latitude": 40.712776,\n      "longitude": -74.005974,\n      "source": "site-a",\n      "status": "up"\n    }\n  ],\n  "apps": [\n    {\n      "name": "frontend",\n      "location": "New York",\n      "status": "up",\n      "source": "site-a",\n      "origin_url": "http://site-a:8080",\n      "labels": { "env": "prod" }\n    }\n  ]\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"X-Site-Sync-Signature"})," header contains the HMAC signature (see HMAC docs for details)."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"X-Site-Sync-Timestamp"})," header contains the request timestamp (RFC3339 format)."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:["For more details, see the code in ",(0,t.jsx)(n.code,{children:"backend/handlers/"})," and ",(0,t.jsx)(n.code,{children:"backend/authentication/hmac/"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var s=i(6540);const t={},a=s.createContext(t);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);