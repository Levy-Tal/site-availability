"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8685],{4844:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"deployment/production","title":"Production Deployment","description":"Best practices and considerations for deploying Site Availability Monitoring in production environments.","source":"@site/docs/deployment/production.md","sourceDirName":"deployment","slug":"/deployment/production","permalink":"/site-availability/docs/deployment/production","draft":false,"unlisted":false,"editUrl":"https://github.com/Levy-Tal/site-availability/tree/main/docs/docs/deployment/production.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Helm Chart Deployment","permalink":"/site-availability/docs/deployment/helm"},"next":{"title":"Development Setup","permalink":"/site-availability/docs/development/setup"}}');var a=i(4848),l=i(8453);const t={sidebar_position:4},r="Production Deployment",o={},c=[{value:"Production Checklist",id:"production-checklist",level:2},{value:"Security",id:"security",level:3},{value:"Reliability",id:"reliability",level:3},{value:"Performance",id:"performance",level:3},{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"High Availability Setup",id:"high-availability-setup",level:2},{value:"Load Balancer Configuration",id:"load-balancer-configuration",level:3},{value:"Multi-Zone Deployment",id:"multi-zone-deployment",level:3},{value:"Monitoring and Alerting",id:"monitoring-and-alerting",level:2},{value:"Prometheus Rules",id:"prometheus-rules",level:3},{value:"Grafana Dashboard",id:"grafana-dashboard",level:3},{value:"Security Configuration",id:"security-configuration",level:2},{value:"TLS/SSL Setup",id:"tlsssl-setup",level:3},{value:"RBAC Configuration",id:"rbac-configuration",level:3},{value:"Network Policies",id:"network-policies",level:3},{value:"Backup and Recovery",id:"backup-and-recovery",level:2},{value:"Configuration Backup",id:"configuration-backup",level:3},{value:"Disaster Recovery Plan",id:"disaster-recovery-plan",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Resource Sizing",id:"resource-sizing",level:3},{value:"Horizontal Pod Autoscaling",id:"horizontal-pod-autoscaling",level:3},{value:"Operational Procedures",id:"operational-procedures",level:2},{value:"Deployment Process",id:"deployment-process",level:3},{value:"Maintenance Windows",id:"maintenance-windows",level:3},{value:"Incident Response",id:"incident-response",level:3},{value:"Cost Optimization",id:"cost-optimization",level:2},{value:"Resource Management",id:"resource-management",level:3},{value:"Auto-scaling Policies",id:"auto-scaling-policies",level:3},{value:"Compliance and Governance",id:"compliance-and-governance",level:2},{value:"Audit Logging",id:"audit-logging",level:3},{value:"Documentation Requirements",id:"documentation-requirements",level:3},{value:"Migration Guide",id:"migration-guide",level:2},{value:"From Development to Production",id:"from-development-to-production",level:3},{value:"Rollback Procedures",id:"rollback-procedures",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"production-deployment",children:"Production Deployment"})}),"\n",(0,a.jsx)(n.p,{children:"Best practices and considerations for deploying Site Availability Monitoring in production environments."}),"\n",(0,a.jsx)(n.h2,{id:"production-checklist",children:"Production Checklist"}),"\n",(0,a.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,a.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Enable HMAC authentication"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use HTTPS/TLS everywhere"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Configure network policies"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Set up secrets management"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Enable audit logging"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Regular security updates"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"reliability",children:"Reliability"}),"\n",(0,a.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Multi-replica deployments"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Health checks configured"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Resource limits set"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Persistent storage"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Backup strategy"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitoring and alerting"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"performance",children:"Performance"}),"\n",(0,a.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Resource sizing"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Horizontal autoscaling"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Load balancing"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","CDN for static assets"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Database optimization"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Caching strategy"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"Internet \u2192 Load Balancer \u2192 Ingress Controller \u2192 Frontend/Backend\n                                              \u2193\n                                           Prometheus \u2190 Apps\n                                              \u2193\n                                            Grafana\n"})}),"\n",(0,a.jsx)(n.h2,{id:"high-availability-setup",children:"High Availability Setup"}),"\n",(0,a.jsx)(n.h3,{id:"load-balancer-configuration",children:"Load Balancer Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# AWS ALB example\napiVersion: v1\nkind: Service\nmetadata:\n  name: site-availability-frontend\n  annotations:\n    service.beta.kubernetes.io/aws-load-balancer-type: "alb"\n    service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "http"\n    service.beta.kubernetes.io/aws-load-balancer-ssl-cert: "arn:aws:acm:..."\nspec:\n  type: LoadBalancer\n  ports:\n    - port: 443\n      targetPort: 80\n  selector:\n    app: site-availability-frontend\n'})}),"\n",(0,a.jsx)(n.h3,{id:"multi-zone-deployment",children:"Multi-Zone Deployment"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"backend:\n  replicas: 3\n  affinity:\n    podAntiAffinity:\n      preferredDuringSchedulingIgnoredDuringExecution:\n        - weight: 100\n          podAffinityTerm:\n            labelSelector:\n              matchExpressions:\n                - key: app\n                  operator: In\n                  values:\n                    - site-availability-backend\n            topologyKey: kubernetes.io/hostname\n"})}),"\n",(0,a.jsx)(n.h2,{id:"monitoring-and-alerting",children:"Monitoring and Alerting"}),"\n",(0,a.jsx)(n.h3,{id:"prometheus-rules",children:"Prometheus Rules"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'groups:\n  - name: site-availability\n    rules:\n      - alert: SiteAvailabilityDown\n        expr: up{job="site-availability-backend"} == 0\n        for: 1m\n        labels:\n          severity: critical\n        annotations:\n          summary: "Site Availability service is down"\n\n      - alert: HighMemoryUsage\n        expr: container_memory_usage_bytes{pod=~"site-availability-.*"} / container_spec_memory_limit_bytes > 0.8\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: "High memory usage detected"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"grafana-dashboard",children:"Grafana Dashboard"}),"\n",(0,a.jsxs)(n.p,{children:["Import the dashboard from ",(0,a.jsx)(n.code,{children:"chart/grafana-dashboards/dashboard.json"})," for comprehensive monitoring."]}),"\n",(0,a.jsx)(n.h2,{id:"security-configuration",children:"Security Configuration"}),"\n",(0,a.jsx)(n.h3,{id:"tlsssl-setup",children:"TLS/SSL Setup"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# cert-manager certificate\napiVersion: cert-manager.io/v1\nkind: Certificate\nmetadata:\n  name: site-availability-tls\n  namespace: monitoring\nspec:\n  secretName: site-availability-tls\n  issuerRef:\n    name: letsencrypt-prod\n    kind: ClusterIssuer\n  dnsNames:\n    - monitoring.example.com\n"})}),"\n",(0,a.jsx)(n.h3,{id:"rbac-configuration",children:"RBAC Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  namespace: monitoring\n  name: site-availability\nrules:\n  - apiGroups: [""]\n    resources: ["configmaps", "secrets"]\n    verbs: ["get", "list"]\n'})}),"\n",(0,a.jsx)(n.h3,{id:"network-policies",children:"Network Policies"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: site-availability-netpol\n  namespace: monitoring\nspec:\n  podSelector:\n    matchLabels:\n      app: site-availability-backend\n  policyTypes:\n    - Ingress\n    - Egress\n  ingress:\n    - from:\n        - podSelector:\n            matchLabels:\n              app: site-availability-frontend\n      ports:\n        - protocol: TCP\n          port: 8080\n"})}),"\n",(0,a.jsx)(n.h2,{id:"backup-and-recovery",children:"Backup and Recovery"}),"\n",(0,a.jsx)(n.h3,{id:"configuration-backup",children:"Configuration Backup"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Backup Kubernetes resources\nkubectl get configmap site-availability-config -o yaml > config-backup.yaml\nkubectl get secret site-availability-secrets -o yaml > secrets-backup.yaml\n\n# Backup Prometheus data\nkubectl exec prometheus-pod -- tar czf /tmp/prometheus-backup.tar.gz /prometheus\nkubectl cp prometheus-pod:/tmp/prometheus-backup.tar.gz ./prometheus-backup.tar.gz\n"})}),"\n",(0,a.jsx)(n.h3,{id:"disaster-recovery-plan",children:"Disaster Recovery Plan"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Configuration Recovery"}),": Restore from version control"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Data Recovery"}),": Restore Prometheus data from backups"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Service Recovery"}),": Redeploy using Helm charts"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Verification"}),": Run health checks and validate monitoring"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,a.jsx)(n.h3,{id:"resource-sizing",children:"Resource Sizing"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"backend:\n  resources:\n    requests:\n      cpu: 200m\n      memory: 256Mi\n    limits:\n      cpu: 1000m\n      memory: 1Gi\n\nfrontend:\n  resources:\n    requests:\n      cpu: 100m\n      memory: 128Mi\n    limits:\n      cpu: 500m\n      memory: 256Mi\n"})}),"\n",(0,a.jsx)(n.h3,{id:"horizontal-pod-autoscaling",children:"Horizontal Pod Autoscaling"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: site-availability-backend-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: site-availability-backend\n  minReplicas: 3\n  maxReplicas: 10\n  metrics:\n    - type: Resource\n      resource:\n        name: cpu\n        target:\n          type: Utilization\n          averageUtilization: 70\n    - type: Resource\n      resource:\n        name: memory\n        target:\n          type: Utilization\n          averageUtilization: 80\n"})}),"\n",(0,a.jsx)(n.h2,{id:"operational-procedures",children:"Operational Procedures"}),"\n",(0,a.jsx)(n.h3,{id:"deployment-process",children:"Deployment Process"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Pre-deployment"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Review changes in staging"}),"\n",(0,a.jsx)(n.li,{children:"Update documentation"}),"\n",(0,a.jsx)(n.li,{children:"Notify stakeholders"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Deployment"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"helm upgrade site-availability chart/ -f values-prod.yaml\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Post-deployment"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Verify health checks"}),"\n",(0,a.jsx)(n.li,{children:"Monitor metrics"}),"\n",(0,a.jsx)(n.li,{children:"Test functionality"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"maintenance-windows",children:"Maintenance Windows"}),"\n",(0,a.jsx)(n.p,{children:"Schedule regular maintenance for:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Security updates"}),"\n",(0,a.jsx)(n.li,{children:"Dependency upgrades"}),"\n",(0,a.jsx)(n.li,{children:"Performance tuning"}),"\n",(0,a.jsx)(n.li,{children:"Backup verification"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"incident-response",children:"Incident Response"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Detection"}),": Automated alerts"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Assessment"}),": Check dashboards and logs"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Response"}),": Follow runbooks"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Resolution"}),": Apply fixes"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Post-mortem"}),": Document lessons learned"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"cost-optimization",children:"Cost Optimization"}),"\n",(0,a.jsx)(n.h3,{id:"resource-management",children:"Resource Management"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# Use resource quotas\napiVersion: v1\nkind: ResourceQuota\nmetadata:\n  name: site-availability-quota\n  namespace: monitoring\nspec:\n  hard:\n    requests.cpu: "4"\n    requests.memory: 8Gi\n    limits.cpu: "8"\n    limits.memory: 16Gi\n'})}),"\n",(0,a.jsx)(n.h3,{id:"auto-scaling-policies",children:"Auto-scaling Policies"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Scale down during off-hours"}),"\n",(0,a.jsx)(n.li,{children:"Use spot instances for non-critical workloads"}),"\n",(0,a.jsx)(n.li,{children:"Implement resource-based scaling"}),"\n",(0,a.jsx)(n.li,{children:"Monitor and adjust regularly"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"compliance-and-governance",children:"Compliance and Governance"}),"\n",(0,a.jsx)(n.h3,{id:"audit-logging",children:"Audit Logging"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# Enable audit logging\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: audit-policy\ndata:\n  audit-policy.yaml: |\n    apiVersion: audit.k8s.io/v1\n    kind: Policy\n    rules:\n    - level: Metadata\n      resources:\n      - group: ""\n        resources: ["configmaps", "secrets"]\n'})}),"\n",(0,a.jsx)(n.h3,{id:"documentation-requirements",children:"Documentation Requirements"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Architecture diagrams"}),"\n",(0,a.jsx)(n.li,{children:"Runbooks and procedures"}),"\n",(0,a.jsx)(n.li,{children:"Security policies"}),"\n",(0,a.jsx)(n.li,{children:"Change management process"}),"\n",(0,a.jsx)(n.li,{children:"Disaster recovery plans"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,a.jsx)(n.h3,{id:"from-development-to-production",children:"From Development to Production"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Configuration Changes"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Update resource limits"}),"\n",(0,a.jsx)(n.li,{children:"Enable authentication"}),"\n",(0,a.jsx)(n.li,{children:"Configure persistent storage"}),"\n",(0,a.jsx)(n.li,{children:"Set up monitoring"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Data Migration"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Export configuration"}),"\n",(0,a.jsx)(n.li,{children:"Migrate historical data"}),"\n",(0,a.jsx)(n.li,{children:"Validate data integrity"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Testing"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Functional testing"}),"\n",(0,a.jsx)(n.li,{children:"Performance testing"}),"\n",(0,a.jsx)(n.li,{children:"Security scanning"}),"\n",(0,a.jsx)(n.li,{children:"Load testing"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"rollback-procedures",children:"Rollback Procedures"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Quick rollback\nhelm rollback site-availability 1\n\n# Gradual rollback with traffic splitting\nkubectl patch deployment site-availability-backend -p \'{"spec":{"replicas":1}}\'\n# Monitor and scale back up gradually\n'})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>r});var s=i(6540);const a={},l=s.createContext(a);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);