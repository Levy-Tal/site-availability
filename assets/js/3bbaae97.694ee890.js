"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[889],{3248:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"usage/configuration/sources/site","title":"Site Source Configuration","description":"The Site source lets you monitor another Site Availability instance. The server will scrape all app statuses and locations from the remote instance by making a request to its /sync endpoint.","source":"@site/docs/usage/configuration/sources/site.md","sourceDirName":"usage/configuration/sources","slug":"/usage/configuration/sources/site","permalink":"/site-availability/docs/usage/configuration/sources/site","draft":false,"unlisted":false,"editUrl":"https://github.com/Levy-Tal/site-availability/tree/main/docs/docs/usage/configuration/sources/site.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Prometheus Source Configuration","permalink":"/site-availability/docs/usage/configuration/sources/prometheus"},"next":{"title":"HTTP Source Configuration","permalink":"/site-availability/docs/usage/configuration/sources/http"}}');var s=i(4848),r=i(8453);const o={sidebar_position:3},a="Site Source Configuration",c={},l=[{value:"How It Works",id:"how-it-works",level:2},{value:"Minimal Example",id:"minimal-example",level:2},{value:"Authentication Example (credentials.yaml)",id:"authentication-example-credentialsyaml",level:2},{value:"Source Configuration Options",id:"source-configuration-options",level:2},{value:"Important Notes",id:"important-notes",level:2},{value:"Best Practices",id:"best-practices",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"site-source-configuration",children:"Site Source Configuration"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"Site"})," source lets you monitor another Site Availability instance. The server will scrape all app statuses and locations from the remote instance by making a request to its ",(0,s.jsx)(n.code,{children:"/sync"})," endpoint."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"/sync"})," endpoint is protected by HMAC authentication. The server uses the ",(0,s.jsx)(n.code,{children:"token"})," from the ",(0,s.jsx)(n.code,{children:"server_settings"})," of the scraped site. (and you put it in the source config) to generate the HMAC signature. See the ",(0,s.jsx)(n.a,{href:"/site-availability/docs/authentication/hmac",children:"HMAC authentication documentation"})," for details."]}),"\n",(0,s.jsx)(n.li,{children:"There is built-in protection against circular scraping: you can safely scrape a site that scrapes from you."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The site source makes a GET request to ",(0,s.jsx)(n.code,{children:"http://other-site:8080/sync"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"The request includes a timestamp and HMAC signature in the headers."}),"\n",(0,s.jsx)(n.li,{children:"The remote site returns all its app statuses and locations, which are merged into your monitoring view."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"minimal-example",children:"Minimal Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'sources:\n  - name: "Server A"\n    type: site\n    config:\n      url: http://server-a:8080\n'})}),"\n",(0,s.jsx)(n.h2,{id:"authentication-example-credentialsyaml",children:"Authentication Example (credentials.yaml)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'server_settings:\n  token: "server-b-token"\n\nsources:\n  - name: Server A\n    config:\n      token: "server-a-token"\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"token"})," under ",(0,s.jsx)(n.code,{children:"server_settings"})," is used for authenticating incoming /sync requests."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"token"})," under the source config (in credentials.yaml) is used for authenticating outgoing /sync requests to the remote site."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"source-configuration-options",children:"Source Configuration Options"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"name"}),": Unique name for the source (required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"type"}),": Must be ",(0,s.jsx)(n.code,{children:"site"})," (required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"config.url"}),": Base URL of the remote Site Availability instance (required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"config.token"}),": HMAC token for authenticating to the remote site."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"labels"}),": Optional labels for this source"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The site source will import all apps and locations from the remote instance."}),"\n",(0,s.jsx)(n.li,{children:"If the remote site is unavailable or returns an error, no apps will be imported from that source."}),"\n",(0,s.jsx)(n.li,{children:"You can safely chain or loop site sources; the system prevents infinite recursion."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use strong, unique tokens for HMAC authentication."}),"\n",(0,s.jsxs)(n.li,{children:["Store tokens in ",(0,s.jsx)(n.code,{children:"credentials.yaml"})," for security."]}),"\n",(0,s.jsxs)(n.li,{children:["Enable ",(0,s.jsx)(n.code,{children:"sync_enable: true"})," in ",(0,s.jsx)(n.code,{children:"server_settings"})," to allow your instance to be scraped by others."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["For more details, see the ",(0,s.jsx)(n.a,{href:"/site-availability/docs/authentication/hmac",children:"HMAC authentication documentation"})," or the codebase."]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var t=i(6540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);