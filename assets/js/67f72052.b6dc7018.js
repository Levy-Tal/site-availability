"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4704],{8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var s=i(6540);const l={},a=s.createContext(l);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(a.Provider,{value:n},e.children)}},8696:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"authentication/local-admin","title":"Local Admin Authentication","description":"This guide explains how to set up and use the local admin authentication method for Site Availability. Local admin provides a simple username/password authentication system that\'s useful for small deployments, testing, or as a fallback when OIDC is unavailable.","source":"@site/docs/authentication/local-admin.md","sourceDirName":"authentication","slug":"/authentication/local-admin","permalink":"/site-availability/docs/authentication/local-admin","draft":false,"unlisted":false,"editUrl":"https://github.com/Levy-Tal/site-availability/tree/main/docs/docs/authentication/local-admin.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"HMAC Authentication","permalink":"/site-availability/docs/authentication/hmac"},"next":{"title":"OIDC Authentication Setup","permalink":"/site-availability/docs/authentication/oidc-setup"}}');var l=i(4848),a=i(8453);const r={},c="Local Admin Authentication",o={},t=[{value:"Overview",id:"overview",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Basic Setup",id:"basic-setup",level:3},{value:"Credentials Setup",id:"credentials-setup",level:3},{value:"Complete Example",id:"complete-example",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Password Requirements",id:"password-requirements",level:3},{value:"File Permissions",id:"file-permissions",level:3},{value:"Production Security",id:"production-security",level:3},{value:"Session Management",id:"session-management",level:2},{value:"Session Timeout",id:"session-timeout",level:3},{value:"Proxy Headers",id:"proxy-headers",level:3},{value:"Usage",id:"usage",level:2},{value:"Logging In",id:"logging-in",level:3},{value:"Admin Privileges",id:"admin-privileges",level:3},{value:"Role-Based Access with Local Admin",id:"role-based-access-with-local-admin",level:2},{value:"Combining with OIDC",id:"combining-with-oidc",level:2},{value:"Testing",id:"testing",level:2},{value:"Verify Configuration",id:"verify-configuration",level:3},{value:"Verification Checklist",id:"verification-checklist",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"1. &quot;Invalid username or password&quot;",id:"1-invalid-username-or-password",level:4},{value:"2. &quot;Local admin not enabled&quot;",id:"2-local-admin-not-enabled",level:4},{value:"3. Session expires immediately",id:"3-session-expires-immediately",level:4},{value:"4. Cannot access credentials file",id:"4-cannot-access-credentials-file",level:4},{value:"Debugging",id:"debugging",level:3},{value:"Migration and Maintenance",id:"migration-and-maintenance",level:2},{value:"Changing Passwords",id:"changing-passwords",level:3},{value:"Disabling Local Admin",id:"disabling-local-admin",level:3},{value:"Backup and Recovery",id:"backup-and-recovery",level:3},{value:"Best Practices",id:"best-practices",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"local-admin-authentication",children:"Local Admin Authentication"})}),"\n",(0,l.jsx)(n.p,{children:"This guide explains how to set up and use the local admin authentication method for Site Availability. Local admin provides a simple username/password authentication system that's useful for small deployments, testing, or as a fallback when OIDC is unavailable."}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"Local admin authentication allows you to:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Set up simple username/password authentication"}),"\n",(0,l.jsx)(n.li,{children:"Provide emergency access when OIDC is down"}),"\n",(0,l.jsx)(n.li,{children:"Quick setup for development and testing"}),"\n",(0,l.jsx)(n.li,{children:"Small deployments without enterprise identity providers"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,l.jsxs)(n.p,{children:["Add the following to your ",(0,l.jsx)(n.code,{children:"config.yaml"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'server_settings:\n  port: "8080"\n  host_url: "https://your-domain.com"\n  session_timeout: 12h # Optional: defaults to system default\n\n  # Local admin configuration\n  local_admin:\n    enabled: true\n    username: "admin" # Your chosen admin username\n'})}),"\n",(0,l.jsx)(n.h3,{id:"credentials-setup",children:"Credentials Setup"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Important"}),": Never put passwords in your main config file. Instead, create a separate ",(0,l.jsx)(n.code,{children:"credentials.yaml"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'server_settings:\n  local_admin:\n    password: "your-secure-password-here"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"complete-example",children:"Complete Example"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"config.yaml"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'server_settings:\n  port: "8080"\n  host_url: "https://your-domain.com"\n  session_timeout: 12h\n\n  # Define application roles (optional, for role-based access)\n  roles:\n    viewer:\n      env: production\n    developer:\n      team: frontend\n      team: backend\n    admin: {} # Full access\n\n  # Local admin setup\n  local_admin:\n    enabled: true\n    username: "admin"\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"credentials.yaml"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'server_settings:\n  local_admin:\n    password: "MySecurePassword123!"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,l.jsx)(n.h3,{id:"password-requirements",children:"Password Requirements"}),"\n",(0,l.jsx)(n.p,{children:"Choose a strong password that includes:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"At least 12 characters"}),"\n",(0,l.jsx)(n.li,{children:"Mix of uppercase and lowercase letters"}),"\n",(0,l.jsx)(n.li,{children:"Numbers and special characters"}),"\n",(0,l.jsx)(n.li,{children:"Avoid common dictionary words"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"file-permissions",children:"File Permissions"}),"\n",(0,l.jsx)(n.p,{children:"Secure your credentials file:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Set restrictive permissions on credentials file\nchmod 600 credentials.yaml\n\n# Ensure only the application user can read it\nchown site-availability:site-availability credentials.yaml\n"})}),"\n",(0,l.jsx)(n.h3,{id:"production-security",children:"Production Security"}),"\n",(0,l.jsx)(n.p,{children:"For production deployments:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Use strong, unique passwords"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Rotate passwords regularly"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Monitor authentication logs"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Consider using local admin only as fallback"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Enable session timeouts"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"session-management",children:"Session Management"}),"\n",(0,l.jsx)(n.h3,{id:"session-timeout",children:"Session Timeout"}),"\n",(0,l.jsx)(n.p,{children:"Configure session timeout to automatically log out inactive users:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'server_settings:\n  session_timeout: "8h" # 8 hours\n  # session_timeout: "30m"  # 30 minutes\n  # session_timeout: "1h30m" # 1 hour 30 minutes\n'})}),"\n",(0,l.jsx)(n.p,{children:"Valid formats:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"1h"})," - 1 hour"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"30m"})," - 30 minutes"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"90s"})," - 90 seconds"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"1h30m"})," - 1 hour 30 minutes"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"12h"})," - 12 hours"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"proxy-headers",children:"Proxy Headers"}),"\n",(0,l.jsx)(n.p,{children:"If running behind a reverse proxy, enable trust for proxy headers:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"server_settings:\n  trust_proxy_headers: true\n"})}),"\n",(0,l.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,l.jsx)(n.h3,{id:"logging-in",children:"Logging In"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Navigate to your Site Availability instance"}),"\n",(0,l.jsx)(n.li,{children:"If local admin is the only authentication method, you'll see a login form"}),"\n",(0,l.jsx)(n.li,{children:'If both local admin and OIDC are enabled, click "Local Admin Login"'}),"\n",(0,l.jsx)(n.li,{children:"Enter your configured username and password"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"admin-privileges",children:"Admin Privileges"}),"\n",(0,l.jsx)(n.p,{children:"Local admin users have full access to:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"All monitoring data regardless of labels"}),"\n",(0,l.jsx)(n.li,{children:"Administrative functions"}),"\n",(0,l.jsx)(n.li,{children:"Configuration viewing (where applicable)"}),"\n",(0,l.jsx)(n.li,{children:"All API endpoints"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"role-based-access-with-local-admin",children:"Role-Based Access with Local Admin"}),"\n",(0,l.jsx)(n.p,{children:"While local admin provides full access by default, you can combine it with role-based access control:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'server_settings:\n  roles:\n    prod-viewer:\n      env: production\n    dev-access:\n      env: development\n      env: staging\n    admin: {} # Full access\n\n  local_admin:\n    enabled: true\n    username: "admin"\n'})}),"\n",(0,l.jsx)(n.p,{children:"The local admin user will automatically have admin privileges, giving them access to all data."}),"\n",(0,l.jsx)(n.h2,{id:"combining-with-oidc",children:"Combining with OIDC"}),"\n",(0,l.jsx)(n.p,{children:"Local admin works well as a fallback to OIDC authentication:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'server_settings:\n  # Primary authentication via OIDC\n  oidc:\n    enabled: true\n    config:\n      issuer: "https://your-provider.com"\n      clientID: "site-availability"\n      # ... other OIDC config\n\n  # Fallback authentication\n  local_admin:\n    enabled: true\n    username: "emergency-admin"\n'})}),"\n",(0,l.jsx)(n.p,{children:"With this setup:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Users normally log in via OIDC"}),"\n",(0,l.jsx)(n.li,{children:"If OIDC is down, administrators can use local admin"}),"\n",(0,l.jsx)(n.li,{children:"The local admin account provides emergency access"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,l.jsx)(n.h3,{id:"verify-configuration",children:"Verify Configuration"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Start the application"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"./site-availability\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Check authentication config"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:8080/auth/config\n"})}),"\n",(0,l.jsx)(n.p,{children:"Expected response should include:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "localAdminEnabled": true,\n  "oidcEnabled": false\n}\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Test login"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Navigate to ",(0,l.jsx)(n.code,{children:"http://localhost:8080"})]}),"\n",(0,l.jsx)(n.li,{children:"Enter your configured username and password"}),"\n",(0,l.jsx)(n.li,{children:"Verify you can access all monitoring data"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"verification-checklist",children:"Verification Checklist"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u2705 Can log in with configured credentials"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Invalid credentials are rejected"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Session persists across page refreshes"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Session expires after configured timeout"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Can access all monitoring data (admin privileges)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,l.jsx)(n.h4,{id:"1-invalid-username-or-password",children:'1. "Invalid username or password"'}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Symptoms"}),": Login fails with correct credentials"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Verify username in ",(0,l.jsx)(n.code,{children:"config.yaml"})," matches what you're entering"]}),"\n",(0,l.jsxs)(n.li,{children:["Check password in ",(0,l.jsx)(n.code,{children:"credentials.yaml"})," (no extra spaces/characters)"]}),"\n",(0,l.jsx)(n.li,{children:"Ensure files are properly formatted YAML"}),"\n",(0,l.jsx)(n.li,{children:"Check file permissions allow application to read files"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"2-local-admin-not-enabled",children:'2. "Local admin not enabled"'}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Symptoms"}),": No local admin login option available"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Verify ",(0,l.jsx)(n.code,{children:"local_admin.enabled: true"})," in config"]}),"\n",(0,l.jsx)(n.li,{children:"Check configuration file is being loaded correctly"}),"\n",(0,l.jsx)(n.li,{children:"Restart application after configuration changes"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"3-session-expires-immediately",children:"3. Session expires immediately"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Symptoms"}),": Logged out right after login"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Check ",(0,l.jsx)(n.code,{children:"session_timeout"})," configuration"]}),"\n",(0,l.jsx)(n.li,{children:"Verify system clock is correct"}),"\n",(0,l.jsx)(n.li,{children:"Check for conflicting proxy settings"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"4-cannot-access-credentials-file",children:"4. Cannot access credentials file"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Symptoms"}),": Application fails to start with file access errors"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Check file permissions: ",(0,l.jsx)(n.code,{children:"ls -la credentials.yaml"})]}),"\n",(0,l.jsx)(n.li,{children:"Verify file ownership matches application user"}),"\n",(0,l.jsx)(n.li,{children:"Ensure file exists in expected location"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"debugging",children:"Debugging"}),"\n",(0,l.jsx)(n.p,{children:"Enable debug logging to troubleshoot authentication issues:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"# Add to config.yaml temporarily\nlogging:\n  level: debug\n"})}),"\n",(0,l.jsx)(n.p,{children:"Look for log entries related to:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Configuration file loading"}),"\n",(0,l.jsx)(n.li,{children:"Authentication attempts"}),"\n",(0,l.jsx)(n.li,{children:"Session creation/validation"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"migration-and-maintenance",children:"Migration and Maintenance"}),"\n",(0,l.jsx)(n.h3,{id:"changing-passwords",children:"Changing Passwords"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Update credentials.yaml"})," with new password"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Restart the application"})," to load new credentials"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Test login"})," with new password"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Inform other administrators"})," of the change"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"disabling-local-admin",children:"Disabling Local Admin"}),"\n",(0,l.jsx)(n.p,{children:"To disable local admin (e.g., after OIDC setup is complete):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"server_settings:\n  local_admin:\n    enabled: false\n"})}),"\n",(0,l.jsx)(n.h3,{id:"backup-and-recovery",children:"Backup and Recovery"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Important"}),": Always backup your credentials file securely:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Create encrypted backup\ngpg -c credentials.yaml\n\n# Store backup in secure location\ncp credentials.yaml.gpg /secure/backup/location/\n"})}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Use local admin as fallback only"})," - Prefer OIDC for primary authentication"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Strong passwords"})," - Use password managers to generate secure passwords"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Regular rotation"})," - Change passwords periodically"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Monitor access"})," - Review authentication logs regularly"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Secure storage"})," - Protect credentials file with proper permissions"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Document access"})," - Keep track of who has admin credentials"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Emergency procedures"})," - Document password reset procedures"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);