"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8782],{855:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"configuration/http-source","title":"HTTP Source Configuration","description":"The HTTP source allows you to monitor websites and HTTP endpoints. It supports authentication, content validation, and customizable HTTP settings.","source":"@site/docs/configuration/http-source.md","sourceDirName":"configuration","slug":"/configuration/http-source","permalink":"/site-availability/docs/configuration/http-source","draft":false,"unlisted":false,"editUrl":"https://github.com/Levy-Tal/site-availability/tree/main/docs/docs/configuration/http-source.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Frontend Configuration","permalink":"/site-availability/docs/configuration/frontend"},"next":{"title":"Prometheus Configuration","permalink":"/site-availability/docs/configuration/prometheus"}}');var t=i(4848),o=i(8453);const a={},r="HTTP Source Configuration",l={},c=[{value:"Basic Configuration",id:"basic-configuration",level:2},{value:"Full Configuration Reference",id:"full-configuration-reference",level:2},{value:"Source Level Configuration",id:"source-level-configuration",level:3},{value:"App Level Configuration",id:"app-level-configuration",level:3},{value:"Authentication",id:"authentication",level:2},{value:"Main Configuration File (config.yaml):",id:"main-configuration-file-configyaml",level:3},{value:"Credentials Configuration (credentials.yaml):",id:"credentials-configuration-credentialsyaml",level:3},{value:"Important Notes:",id:"important-notes",level:3},{value:"Supported Authentication Types:",id:"supported-authentication-types",level:3},{value:"Content Validation Types",id:"content-validation-types",level:2},{value:"Status Code Ranges",id:"status-code-ranges",level:2},{value:"Best Practices",id:"best-practices",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"http-source-configuration",children:"HTTP Source Configuration"})}),"\n",(0,t.jsx)(n.p,{children:"The HTTP source allows you to monitor websites and HTTP endpoints. It supports authentication, content validation, and customizable HTTP settings."}),"\n",(0,t.jsx)(n.h2,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Here's a minimal configuration example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'sources:\n  - name: web-monitoring\n    type: http\n    labels:\n      service: "web-monitoring"\n    config:\n      apps:\n        - name: website\n          location: "US-East"\n          url: "https://example.com"\n          method: "GET"\n          allowed_status_codes: ["2XX"]\n'})}),"\n",(0,t.jsx)(n.h2,{id:"full-configuration-reference",children:"Full Configuration Reference"}),"\n",(0,t.jsx)(n.h3,{id:"source-level-configuration",children:"Source Level Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'sources:\n  - name: web-monitoring # Required: Unique name for the source\n    type: http # Required: Must be "http"\n    labels: # Optional: Labels for all apps in this source\n      service: "web"\n      environment: "prod"\n    config:\n      apps: # Required: List of apps to monitor\n        -  # App configuration (see below)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"app-level-configuration",children:"App Level Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Each app under the ",(0,t.jsx)(n.code,{children:"apps"})," section supports the following options:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apps:\n  - name: "website" # Required: Unique name for the app\n    location: "US-East" # Required: Must match a location defined in your config\n    url: "https://example.com" # Required: URL to monitor\n\n    # Basic HTTP Options\n    method:\n      "GET" # Optional: HTTP method (GET, POST, PUT, DELETE, HEAD, OPTIONS)\n      # Default: GET\n    headers: {} # Optional: Custom HTTP headers\n    body: "" # Optional: Request body for POST/PUT\n    content_type: "" # Optional: Content-Type header\n\n    # Connection Options\n    timeout:\n      "30s" # Optional: Request timeout\n      # Default: Uses global scraping timeout\n    follow_redirects:\n      true # Optional: Whether to follow redirects\n      # Default: true\n    max_redirects:\n      10 # Optional: Maximum number of redirects to follow\n      # Default: 10\n\n    # SSL Configuration\n    ssl_verify:\n      true # Optional: Whether to verify SSL certificates\n      # Default: true\n\n    # Status Code Configuration\n    allowed_status_codes: # Optional: Status codes considered successful\n      - "2XX" # Can use ranges (1XX-5XX) or specific codes (200)\n      - 200 # Default: ["2XX"]\n      - 201\n    blocked_status_codes: # Optional: Status codes considered failures\n      - "5XX" # Default: ["4XX", "5XX"]\n      - 429\n\n    # Content Validation\n    validation: # Optional: Content validation rules\n      success: # Conditions that must be true for success\n        - type: "body_contains"\n          text: "Welcome"\n          case_sensitive: false\n        - type: "body_not_contains"\n          text: "Error"\n        - type: "status_code"\n          text: "200"\n        - type: "response_time"\n          max_ms: 3000\n        - type: "json_path"\n          path: "$.status"\n          expected_value: "ok"\n      failure: [] # Conditions that indicate failure if true\n\n    # Authentication\n    auth: # Optional\n      type: "basic" # "basic", "bearer", "digest", "oauth2"\n      username: "user" # For basic/digest\n      password: "pass" # For basic/digest\n      token: "token" # For bearer/oauth2\n\n    labels: {} # Optional: App-specific labels\n'})}),"\n",(0,t.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,t.jsx)(n.p,{children:"Authentication should be configured in your credentials file, which will be merged with your main configuration. The credentials file must follow the same structure as your main configuration file for proper merging."}),"\n",(0,t.jsx)(n.h3,{id:"main-configuration-file-configyaml",children:"Main Configuration File (config.yaml):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'sources:\n  - name: web-monitoring\n    type: http\n    config:\n      apps:\n        - name: secure-api\n          location: "US-East"\n          url: "https://api.example.com"\n          method: "GET"\n        - name: oauth-service\n          location: "US-West"\n          url: "https://oauth.example.com"\n          method: "GET"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"credentials-configuration-credentialsyaml",children:"Credentials Configuration (credentials.yaml):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'sources:\n  - name: web-monitoring # Must match source name in main config\n    config:\n      apps:\n        - name: secure-api # Must match app name in main config\n          auth:\n            type: "basic"\n            username: "user"\n            password: "pass"\n\n        - name: oauth-service # Must match app name in main config\n          auth:\n            type: "bearer"\n            token: "your-token"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"important-notes",children:"Important Notes:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"The structure in credentials.yaml must exactly match your main config"}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"name"})," fields must match at both source and app levels"]}),"\n",(0,t.jsx)(n.li,{children:"The files will be merged based on matching names"}),"\n",(0,t.jsx)(n.li,{children:"Credentials take precedence over any auth settings in the main config"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"supported-authentication-types",children:"Supported Authentication Types:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"basic"}),": Basic HTTP authentication","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'auth:\n  type: "basic"\n  username: "user"\n  password: "pass"\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"bearer"}),": Bearer token authentication","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'auth:\n  type: "bearer"\n  token: "your-token"\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"digest"}),": Digest authentication","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'auth:\n  type: "digest"\n  username: "user"\n  password: "pass"\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"oauth2"}),": OAuth 2.0 token authentication","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'auth:\n  type: "oauth2"\n  token: "your-oauth-token"\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"content-validation-types",children:"Content Validation Types"}),"\n",(0,t.jsx)(n.p,{children:"The following validation types are supported:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"body_contains"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Checks if response body contains specified text"}),"\n",(0,t.jsxs)(n.li,{children:["Options:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"text"}),": Text to search for"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"case_sensitive"}),": Whether to perform case-sensitive search (default: false)"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"body_not_contains"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Checks if response body does not contain specified text"}),"\n",(0,t.jsxs)(n.li,{children:["Same options as ",(0,t.jsx)(n.code,{children:"body_contains"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"status_code"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Validates specific status code"}),"\n",(0,t.jsxs)(n.li,{children:["Options:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"text"}),": Expected status code as string"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"response_time"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Validates response time"}),"\n",(0,t.jsxs)(n.li,{children:["Options:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"max_ms"}),": Maximum allowed response time in milliseconds"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"json_path"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Validates JSON response using path expression"}),"\n",(0,t.jsxs)(n.li,{children:["Options:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"path"}),": JSON path expression"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"expected_value"}),": Expected value at path"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"value_type"}),": Type of value to compare (string, number, boolean)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"operator"}),": Comparison operator (eq, ne, gt, lt, etc.)"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"status-code-ranges",children:"Status Code Ranges"}),"\n",(0,t.jsx)(n.p,{children:"Status codes can be specified as:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Exact codes: ",(0,t.jsx)(n.code,{children:"200"}),", ",(0,t.jsx)(n.code,{children:"201"}),", ",(0,t.jsx)(n.code,{children:"404"})]}),"\n",(0,t.jsxs)(n.li,{children:["Ranges: ",(0,t.jsx)(n.code,{children:'"2XX"'}),", ",(0,t.jsx)(n.code,{children:'"4XX"'}),", ",(0,t.jsx)(n.code,{children:'"5XX"'}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'"1XX"'}),": Informational responses (100-199)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'"2XX"'}),": Successful responses (200-299)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'"3XX"'}),": Redirection messages (300-399)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'"4XX"'}),": Client errors (400-499)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'"5XX"'}),": Server errors (500-599)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Timeouts"}),": Always set appropriate timeouts to avoid hanging requests"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SSL Verification"}),": Keep SSL verification enabled in production unless you specifically need to disable it"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Content Validation"}),": Use specific content validation to ensure responses are valid"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Labels"}),": Add meaningful labels for better filtering and organization"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Authentication"}),": Store credentials in a separate credentials file"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Status Codes"}),": Be specific about which status codes are acceptable"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>r});var s=i(6540);const t={},o=s.createContext(t);function a(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);