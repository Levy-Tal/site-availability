"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8559],{1596:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"api/overview","title":"API Overview","description":"The Site Availability API provides RESTful endpoints for accessing application status, configuration, and metrics data.","source":"@site/docs/api/overview.md","sourceDirName":"api","slug":"/api/overview","permalink":"/site-availability/docs/api/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/Levy-Tal/site-availability/tree/main/docs/docs/api/overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Testing Guide","permalink":"/site-availability/docs/development/testing"},"next":{"title":"API Endpoints","permalink":"/site-availability/docs/api/endpoints"}}');var t=i(4848),a=i(8453);const l={sidebar_position:1},r="API Overview",c={},o=[{value:"Base URL",id:"base-url",level:2},{value:"API Design Principles",id:"api-design-principles",level:2},{value:"RESTful Architecture",id:"restful-architecture",level:3},{value:"Response Format",id:"response-format",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Available Endpoints",id:"available-endpoints",level:2},{value:"Health and Status",id:"health-and-status",level:3},{value:"Applications",id:"applications",level:3},{value:"Locations",id:"locations",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Authentication",id:"authentication",level:2},{value:"HMAC Authentication",id:"hmac-authentication",level:3},{value:"Signature Generation",id:"signature-generation",level:3},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Versioning",id:"versioning",level:2},{value:"CORS Support",id:"cors-support",level:2},{value:"WebSocket Support (Future)",id:"websocket-support-future",level:2},{value:"SDK and Client Libraries",id:"sdk-and-client-libraries",level:2},{value:"JavaScript Client",id:"javascript-client",level:3},{value:"Go Client",id:"go-client",level:3},{value:"Monitoring and Metrics",id:"monitoring-and-metrics",level:2},{value:"Development Tools",id:"development-tools",level:2},{value:"OpenAPI Specification",id:"openapi-specification",level:3},{value:"Postman Collection",id:"postman-collection",level:3},{value:"Error Codes",id:"error-codes",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"api-overview",children:"API Overview"})}),"\n",(0,t.jsx)(n.p,{children:"The Site Availability API provides RESTful endpoints for accessing application status, configuration, and metrics data."}),"\n",(0,t.jsx)(n.h2,{id:"base-url",children:"Base URL"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"http://localhost:8080/api\n"})}),"\n",(0,t.jsx)(n.h2,{id:"api-design-principles",children:"API Design Principles"}),"\n",(0,t.jsx)(n.h3,{id:"restful-architecture",children:"RESTful Architecture"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Resource-based URLs"}),"\n",(0,t.jsx)(n.li,{children:"HTTP methods for actions"}),"\n",(0,t.jsx)(n.li,{children:"Stateless requests"}),"\n",(0,t.jsx)(n.li,{children:"JSON responses"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"response-format",children:"Response Format"}),"\n",(0,t.jsx)(n.p,{children:"All API responses follow a consistent structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {...},\n  "meta": {\n    "timestamp": "2023-12-01T10:00:00Z",\n    "count": 10,\n    "version": "v1"\n  },\n  "error": null\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(n.p,{children:"Error responses include:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": null,\n  "meta": {\n    "timestamp": "2023-12-01T10:00:00Z"\n  },\n  "error": {\n    "code": "VALIDATION_ERROR",\n    "message": "Invalid request parameters",\n    "details": ["scrape_interval must be positive"]\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"available-endpoints",children:"Available Endpoints"}),"\n",(0,t.jsx)(n.h3,{id:"health-and-status",children:"Health and Status"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /health\n"})}),"\n",(0,t.jsx)(n.p,{children:"System health check endpoint."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "status": "healthy",\n  "timestamp": "2023-12-01T10:00:00Z",\n  "uptime": "2h30m15s"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"applications",children:"Applications"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /api/apps\n"})}),"\n",(0,t.jsx)(n.p,{children:"Get all monitored applications and their status."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "name": "frontend",\n      "location": "New York",\n      "status": "up",\n      "last_check": "2023-12-01T10:00:00Z",\n      "response_time": 0.142,\n      "coordinates": {\n        "latitude": 40.712776,\n        "longitude": -74.005974\n      }\n    }\n  ],\n  "meta": {\n    "count": 1,\n    "timestamp": "2023-12-01T10:00:00Z"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"locations",children:"Locations"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /api/locations\n"})}),"\n",(0,t.jsx)(n.p,{children:"Get all configured monitoring locations."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "name": "New York",\n      "latitude": 40.712776,\n      "longitude": -74.005974,\n      "apps_count": 3\n    }\n  ],\n  "meta": {\n    "count": 1,\n    "timestamp": "2023-12-01T10:00:00Z"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /api/config\n"})}),"\n",(0,t.jsx)(n.p,{children:"Get current configuration information."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "scrape_interval": "30s",\n    "total_apps": 5,\n    "total_locations": 2,\n    "version": "1.0.0"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"POST /api/scrape-interval\n"})}),"\n",(0,t.jsx)(n.p,{children:"Update the scraping interval."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Request:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "interval": "60s"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "interval": "60s",\n    "updated_at": "2023-12-01T10:00:00Z"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,t.jsx)(n.p,{children:"The API supports HMAC-SHA256 authentication for secure access."}),"\n",(0,t.jsx)(n.h3,{id:"hmac-authentication",children:"HMAC Authentication"}),"\n",(0,t.jsx)(n.p,{children:"Include the HMAC signature in the request header:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"Authorization: HMAC-SHA256 <signature>\nX-Timestamp: 1638360000\n"})}),"\n",(0,t.jsx)(n.h3,{id:"signature-generation",children:"Signature Generation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// JavaScript example\nconst crypto = require("crypto");\n\nfunction generateSignature(method, path, body, timestamp, secret) {\n  const message = `${method}\\n${path}\\n${body}\\n${timestamp}`;\n  return crypto.createHmac("sha256", secret).update(message).digest("hex");\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// Go example\nfunc GenerateSignature(method, path, body, timestamp, secret string) string {\n    message := fmt.Sprintf("%s\\n%s\\n%s\\n%s", method, path, body, timestamp)\n    h := hmac.New(sha256.New, []byte(secret))\n    h.Write([]byte(message))\n    return hex.EncodeToString(h.Sum(nil))\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,t.jsx)(n.p,{children:"The API implements rate limiting to prevent abuse:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Rate"}),": 100 requests per minute per IP"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Burst"}),": 10 requests"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Headers"}),": Rate limit information in response headers"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"X-RateLimit-Limit: 100\nX-RateLimit-Remaining: 95\nX-RateLimit-Reset: 1638360060\n"})}),"\n",(0,t.jsx)(n.h2,{id:"versioning",children:"Versioning"}),"\n",(0,t.jsx)(n.p,{children:"The API uses URL versioning:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Current version: ",(0,t.jsx)(n.code,{children:"v1"})]}),"\n",(0,t.jsxs)(n.li,{children:["Full URL: ",(0,t.jsx)(n.code,{children:"http://localhost:8080/api/v1/apps"})]}),"\n",(0,t.jsx)(n.li,{children:"Default: If no version specified, defaults to latest"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"cors-support",children:"CORS Support"}),"\n",(0,t.jsx)(n.p,{children:"Cross-Origin Resource Sharing (CORS) is enabled for frontend applications:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"Access-Control-Allow-Origin: *\nAccess-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, Authorization, X-Timestamp\n"})}),"\n",(0,t.jsx)(n.h2,{id:"websocket-support-future",children:"WebSocket Support (Future)"}),"\n",(0,t.jsx)(n.p,{children:"Real-time updates via WebSocket:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'const ws = new WebSocket("ws://localhost:8080/api/ws");\n\nws.onmessage = (event) => {\n  const data = JSON.parse(event.data);\n  // Handle real-time updates\n};\n'})}),"\n",(0,t.jsx)(n.h2,{id:"sdk-and-client-libraries",children:"SDK and Client Libraries"}),"\n",(0,t.jsx)(n.h3,{id:"javascript-client",children:"JavaScript Client"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'import { SiteAvailabilityClient } from "site-availability-client";\n\nconst client = new SiteAvailabilityClient({\n  baseUrl: "http://localhost:8080",\n  apiKey: "your-api-key",\n});\n\n// Get applications\nconst apps = await client.getApplications();\n\n// Update scrape interval\nawait client.updateScrapeInterval("60s");\n'})}),"\n",(0,t.jsx)(n.h3,{id:"go-client",children:"Go Client"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'import "github.com/levy-tal/site-availability/client"\n\nclient := client.New(&client.Config{\n    BaseURL: "http://localhost:8080",\n    APIKey:  "your-api-key",\n})\n\napps, err := client.GetApplications(context.Background())\n'})}),"\n",(0,t.jsx)(n.h2,{id:"monitoring-and-metrics",children:"Monitoring and Metrics"}),"\n",(0,t.jsx)(n.p,{children:"The API exposes Prometheus metrics:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /metrics\n"})}),"\n",(0,t.jsx)(n.p,{children:"Available metrics:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"api_requests_total"}),": Total API requests"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"api_request_duration_seconds"}),": Request duration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"api_errors_total"}),": Total API errors"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"development-tools",children:"Development Tools"}),"\n",(0,t.jsx)(n.h3,{id:"openapi-specification",children:"OpenAPI Specification"}),"\n",(0,t.jsx)(n.p,{children:"The API is documented using OpenAPI 3.0:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'openapi: 3.0.0\ninfo:\n  title: Site Availability Monitoring API\n  version: 1.0.0\n  description: API for monitoring application availability\nservers:\n  - url: http://localhost:8080/api/v1\npaths:\n  /apps:\n    get:\n      summary: Get all applications\n      responses:\n        "200":\n          description: List of applications\n'})}),"\n",(0,t.jsx)(n.h3,{id:"postman-collection",children:"Postman Collection"}),"\n",(0,t.jsx)(n.p,{children:"Import the Postman collection for easy API testing:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "info": {\n    "name": "Site Availability Monitoring API",\n    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/"\n  },\n  "item": [\n    {\n      "name": "Get Applications",\n      "request": {\n        "method": "GET",\n        "url": "{{baseUrl}}/api/apps"\n      }\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"error-codes",children:"Error Codes"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Code"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"200"}),(0,t.jsx)(n.td,{children:"Success"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"400"}),(0,t.jsx)(n.td,{children:"Bad Request"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"401"}),(0,t.jsx)(n.td,{children:"Unauthorized"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"403"}),(0,t.jsx)(n.td,{children:"Forbidden"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"404"}),(0,t.jsx)(n.td,{children:"Not Found"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"429"}),(0,t.jsx)(n.td,{children:"Rate Limited"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"500"}),(0,t.jsx)(n.td,{children:"Internal Server Error"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"503"}),(0,t.jsx)(n.td,{children:"Service Unavailable"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Learn about specific ",(0,t.jsx)(n.a,{href:"./endpoints",children:"API Endpoints"})]}),"\n",(0,t.jsxs)(n.li,{children:["Set up ",(0,t.jsx)(n.a,{href:"./authentication",children:"Authentication"})]}),"\n",(0,t.jsxs)(n.li,{children:["Explore ",(0,t.jsx)(n.a,{href:"./metrics",children:"Metrics Integration"})]}),"\n",(0,t.jsxs)(n.li,{children:["Get started with ",(0,t.jsx)(n.a,{href:"../development/setup",children:"Development Setup"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var s=i(6540);const t={},a=s.createContext(t);function l(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);